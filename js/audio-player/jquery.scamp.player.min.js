/*!
 * Scamp Player ver. 3

 * jQuery SoundManager 2 Plugin
 *
 * Copyright (c) 2017 Mariusz Rek
 * Rascals Themes 2017
 *
 */
(function(a){a.ScampPlayer=function(b,c){var m={sm_options:{},queue:null,volume_user:80,volume:100,shoutcast_interval:20000,shoutcast_timer:false,shoutcast:true,is_shoutcast:false,autoplay:false,loop:false,random:false,titlebar:false,no_track_image:null,delay:5,path:null,load_first_track:true,client_id:"23f5c38e0aa354cdd0e1a6b4286f6aa4",debug:false,local_storage:false,link_filter:".track-title",labels:{play:"Play",cover:"Cover",title:"Title/Artist",buy:"Buy/Download",remove:"Remove",empty_queue:"Empty Queue"},obj:{status:"ready",action:"",tracks:[],tracks_size:0,track_nr:-1},storage_play:false,play_from_list:false,mobile:false,status:null,soundcloud:false,replace_sc_covers:true,track_id:0,new_tracks_nr:0,new_tracks_notifications:false,sm_init:false,rebuild:false,sound:null,track:null,searching:false,tracklist_length:null,document_title:document.title,track_html:null,tracklist:null,onReady:function(){},onTrackEnd:function(){},onTrackStart:function(){}};
var d=this;d.settings={};var q=function(){d.settings=a.extend({},m,c);d.el=b;if(window.soundManager){sm_obj={onready:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){d.settings.mobile=true;
}if(d.settings.mobile){d.settings.autoplay=false;}if(d.settings.mobile&&d.settings.path!=null){a("body").append('<div id="scamp-mobile-init"></div>');a("#scamp-mobile-init").on("click touch mousemove mousedown",function(B){$that=a(this);
var A=soundManager.createSound({id:"init_mobile_track",url:d.settings.path+"/blank.mp3",autoload:false,volume:100,onload:function(){},onplay:function(){},onpause:function(){},onresume:function(){},onstop:function(){},onfinish:function(){$that.remove();
},whileloading:function(){},whileplaying:function(){}});A.play();});}if(typeof SC!=="undefined"){SC.initialize({client_id:d.settings.client_id});SC.whenStreamingReady(function(){d.settings.soundcloud=true;
});}d.settings.sm_init=true;var x=null;if(a("> a",d.el).length){x=new Array();var y=a("> a",d.el).length;a("> a",d.el).each(function(){x.push(a(this));
a(this).remove();});}d.el.append('<div id="sp-toggle-wrap"><div id="sp-toggle"></div></div><div class="sp-main-container"><div class="sp-queue-container"><div class="sp-queue"><div id="sp-scroller"><table id="sp-queue-scroll"><thead><tr><th class="sp-list-controls" colspan="5"><span id="sp-empty-queue">'+d.settings.labels.empty_queue+"</span></th></tr><tr><th>"+d.settings.labels.play+"</th><th>"+d.settings.labels.cover+'</th><th class="sp-th-title">'+d.settings.labels.title+'</th><th class="sp-th-cart sp-small-screen">'+d.settings.labels.buy+'</th><th class="sp-th-remove sp-small-screen sp-medium-screen">'+d.settings.labels.remove+'</th></tr></thead><tbody></tbody></table></div></div></div><div class="sp-player-wrap"><div class="sp-progress-container"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span></div></div><div class="sp-player-container"><div class="sp-buttons-container"><div class="sp-controls"><a class="sp-prev-button"></a><a class="sp-play-button"></a><a class="sp-next-button"></a><div class="sp-volume-container"><div class="sp-volume-bar-container"><div class="sp-volume-slider"><span class="sp-volume-position"></span></div></div></div></div><div class="sp-queue-button-container"><span class="sp-badge"></span><a class="sp-queue-button"></a></div></div><div class="sp-track-container"><a class="sp-track-cover"><img src="'+d.settings.no_track_image+'" alt="Track cover" class="sp-track-artwork"/></a><div class="sp-track-details"><a class="sp-track-title"></a><a class="sp-track-artist"></a><div class="sp-marquee-container"><span class="sp-marquee"></span></div></div></div><div class="sp-time"><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div></div></div>');
d.settings.track_html=['<tr class="sp-track">','<td><a class="sp-track-control sp-icon" href="#"></a></td>','<td class="sp-cover-artwork"><img src="" alt="Cover" /></td>','<td class="sp-title"><a class="sp-title-button"></a><a class="sp-artist-button"></a></td>','<td class="sp-cart sp-small-screen"><a class="sp-icon sp-cart-button"></a></td>','<td class="sp-remove sp-small-screen sp-medium-screen"><span class="sp-icon sp-remove-button"></span></td>'].join("\n");
d.settings.tracklist=a("#sp-queue-scroll");a(".sp-volume-position").css("width",d.settings.volume+"%");_set_vol_class(d.settings.volume);if(typeof(Storage)!=="undefined"&&sessionStorage.getItem("scamp_player_list")!==null&&sessionStorage.getItem("scamp_player_list")!==""){d.settings.local_storage=true;
var z=sessionStorage.getItem("scamp_player_list"),w=0;a("#sp-queue-scroll tbody").html(z);a("#sp-queue-scroll tbody .sp-track-control").on("click",j);a("#sp-queue-scroll tbody .sp-remove-button").on("click",o);
d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;a("#sp-queue-scroll .sp-track").removeClass("loading");if(!d.settings.mobile){if(a("#sp-queue-scroll .sp-track.playing").length){d.settings.track=a("#sp-queue-scroll .sp-track.playing");
if(sessionStorage.getItem("scamp_player_pos")!==null){w=sessionStorage.getItem("scamp_player_pos");}if(sessionStorage.getItem("scamp_player_shoutcast")==true){g("play",0);
}else{g("play",w);}d.settings.storage_play=true;}else{if(a("#sp-queue-scroll .sp-track.paused").length){d.settings.track=a("#sp-queue-scroll .sp-track.paused");
if(sessionStorage.getItem("scamp_player_pos")!==null){w=sessionStorage.getItem("scamp_player_pos");}g("pause",w);d.settings.storage_play=false;}else{d.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
g("pause",0);d.settings.storage_play=false;}}}else{if(a("#sp-queue-scroll .sp-track.playing").length){d.settings.track=a("#sp-queue-scroll .sp-track.playing");
}else{if(a("#sp-queue-scroll .sp-track.paused").length){d.settings.track=a("#sp-queue-scroll .sp-track.paused");}else{d.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
}}if(sessionStorage.getItem("scamp_player_pos")!==null){w=sessionStorage.getItem("scamp_player_pos");}else{w=0;}g("pause",w);d.settings.storage_play=false;
}}else{if(x!==null){d.settings.obj={status:"working",action:"add_tracks",tracks:x,tracks_size:y,track_nr:-1,};t();}}a(".sp-play-button, .sp-next-button, .sp-prev-button").on("touchstart click",function(){d.settings.play_from_list=false;
});a(".sp-play-button").on("touchstart click",_play);a(".sp-next-button").on("touchstart click",f);a(".sp-prev-button").on("touchstart click",e);a(".sp-queue-button").on("touchstart click",function(A){d.el.toggleClass("sp-show-list");
a("body").toggleClass("sp-show-list");A.preventDefault();});a("#sp-toggle").on("touchstart click",function(A){d.el.toggleClass("sp-show-player");A.preventDefault();
});a("#sp-empty-queue").on("touchstart click",function(A){d.settings.play_from_list=false;if(a("#sp-queue-scroll .sp-track.playing").length||a("#sp-queue-scroll .sp-track.paused").length){_destruct_sound();
clearInterval(d.settings.shoutcast_timer);}a("#sp-queue-scroll .sp-track").not(".playing").remove();d.settings.track=null;d.settings.tracklist_length=null;
p(0);a(".sp-progress").find(".sp-position").width(0);a(".sp-progress").find(".sp-loading").width(0);a(".sp-content-control.sp-is-active").removeClass("sp-is-active");
if(typeof(Storage)!=="undefined"){sessionStorage.removeItem("scamp_player_list");}A.preventDefault();});l();d.update_events("body");d.el.addClass("sp-show");
d.settings.onReady.call(undefined);return;},ontimeout:function(){},defaultOptions:{volume:d.settings.volume,usePeakData:false}};a.extend(d.settings.sm_options,sm_obj);
soundManager.setup(d.settings.sm_options);}};_remove_tracks=function(w){a("#"+w).find(".track").each(function(){var y=a(this).attr("href"),z=a('#sp-queue-scroll .sp-track-control[href="'+y+'"]'),x=a('#sp-queue-scroll .sp-track[data-sc="'+y+'"]');
if(z.length){z.parents(".sp-track").remove();}if(x){x.remove();}});};_check_tracks=function(y){if(a('#sp-queue-scroll .fromlist[data-fromlist="'+y+'"]').length<=0){return false;
}var x=a("#"+y).find(".track").length,w=a('#sp-queue-scroll .fromlist[data-fromlist="'+y+'"]').length;if(x!=w){return false;}return true;};_get_track_index=function(){var w,x=d.settings.track.find(".sp-track-control").attr("href");
track_from_queue=a("#sp-queue-scroll").find('.sp-track-control[href="'+x+'"]');w=track_from_queue.parents('tr[class*="sp-track"]').index();return w;};function v(x,w){if(w==""){w="80";
}a.SHOUTcast({host:x,port:w,}).stats(function(){if(this.onAir()){a("#scamp_player .sp-track-container .sp-track-title").text(this.get("songtitle"));}else{a("#scamp_player .sp-track-container .sp-track-title").text(this.get("status"));
}});}var g=function(z,y){if(typeof(y)==="undefined"){y=0;}if(typeof(z)==="undefined"){z="play";}d.settings.volume_user=d.settings.volume;var x=d.settings.track.find(".sp-track-control").attr("href"),w=document.createElement("a");
w.href=x;clearInterval(d.settings.shoutcast_timer);if(x.indexOf("?sp_radio")>=0){if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",true);
}a("#scamp_player").addClass("is-shoutcast");d.settings.is_shoutcast=true;if(d.settings.shoutcast){if(x.indexOf("listen.radionomy")>=0){}else{if(x.indexOf("&onair=0")>=0){}else{d.settings.shoutcast_timer=setInterval(function(){v(w.hostname,w.port);
},d.settings.shoutcast_interval);v(w.hostname,w.port);}}}}else{a("#scamp_player").removeClass("is-shoutcast");if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",false);
}d.settings.is_shoutcast=false;}d.settings.sound=soundManager.createSound({id:"scamp_sound",url:x,from:y,autoload:false,volume:d.settings.volume,onload:function(){d.settings.status="play";
},onplay:function(){var A={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackStart.call(this,A);if(d.settings.sound.readyState==3){d.settings.status="play";}else{d.settings.track.addClass("loading");d.el.addClass("loading");
d.settings.status="loading";}d.update_content();a("#sp-queue-scroll tbody .paused").removeClass("paused");a(".sp-volume-position").css("width",d.settings.volume+"%");
d.settings.sound.setVolume(d.settings.volume);},onpause:function(){d.settings.status="pause";d.update_content();if(!d.settings.searching){d.settings.track.removeClass("playing").addClass("paused");
d.el.removeClass("playing").addClass("paused");}},onresume:function(){d.settings.status="play";d.update_content();d.settings.track.removeClass("paused").addClass("playing");
d.el.removeClass("paused").addClass("playing");},onstop:function(){d.settings.sound.setPosition(0);clearInterval(d.settings.shoutcast_timer);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("playing loading paused");d.el.removeClass("playing loading paused");a(".sp-time-elapsed, .sp-time-total").empty();
a(".sp-progress").find(".sp-position").width(0);},onfinish:function(){clearInterval(d.settings.shoutcast_timer);var A={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackEnd.call(this,A);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("loading paused");d.el.removeClass("loading paused");if(d.settings.random){s();return false;}if(d.settings.loop){f();
}else{var B=_get_track_index();if(B!=d.settings.tracklist_length){f();}else{d.settings.track.removeClass("playing");d.el.removeClass("playing");}}},whileloading:function(){a(".sp-progress").find(".sp-loading").width(d.settings.sound.bytesLoaded/d.settings.sound.bytesTotal*100+"%");
},whileplaying:function(){d.settings.track.removeClass("paused loading").addClass("playing");d.el.removeClass("paused loading").addClass("playing");d.update_content();
if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_pos",d.settings.sound.position);}a(".sp-progress").find(".sp-position").width(d.settings.sound.position/d.settings.sound.durationEstimate*100+"%");
a(".sp-time-elapsed").html(_format_time(d.settings.sound.position));a(".sp-time-total").html(_format_time(d.settings.sound.durationEstimate));if(!d.settings.mobile&&(d.settings.sound.position>=d.settings.sound.durationEstimate)){clearInterval(d.settings.shoutcast_timer);
var A={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackEnd.call(this,A);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("loading paused");d.el.removeClass("loading paused");if(d.settings.random){s();return false;}if(d.settings.loop){f();
}else{var B=_get_track_index();if(B!=d.settings.tracklist_length){f();}else{d.settings.track.removeClass("playing");d.el.removeClass("playing");}}}}});
if((d.settings.load_first_track&&d.settings.local_storage==false)||z==="pause"){d.settings.load_first_track=false;}else{if(z==="play"){d.settings.load_first_track=false;
}d.settings.sound.togglePause();}u();};_pause=function(){if(d.settings.sound){if(d.settings.track.hasClass("playing")){d.settings.sound.pause();}}};_play=function(){if(typeof(event)!=="undefined"){if(a(event.target).hasClass("sp-play-button")||a(event.target).hasClass("sp-track-control")){d.settings.storage_play=false;
}}if(d.settings.tracklist_length==null){return;}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");}if(d.settings.sound){if(d.settings.track.hasClass("playing")){d.settings.sound.togglePause();
}else{d.settings.sound.togglePause();}}else{g();}if(d.settings.titlebar){document.title=d.settings.track.find(".sp-title-button").text()+" | "+d.settings.document_title;
}if(typeof(Storage)!=="undefined"){var w=function(){if((d.settings.track!=null)&&(d.settings.track.hasClass("playing")||d.settings.track.hasClass("paused"))){var x=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",x);}else{setTimeout(w,400);}};w();}if(typeof(event)!=="undefined"){event.preventDefault();event.stopPropagation();
event.stopImmediatePropagation();}return false;};var s=function(){if(d.settings.tracklist_length==null||d.settings.tracklist_length<2){d.settings.track=w;
_play();return false;}function x(B,A){return Math.floor(Math.random()*(A-B+1))+B;}var z=_get_track_index(),w=null,y=null;while((y=x(0,d.settings.tracklist_length))==z){}d.settings.track.removeClass("playing");
d.el.removeClass("playing");w=a("#sp-queue-scroll tbody tr:eq("+y+")");_destruct_sound();d.settings.track=w;_play();if(d.settings.sound){d.settings.sound.setPosition(0);
}return true;};var f=function(){d.settings.storage_play=false;if(d.settings.tracklist_length==null){return;}var z=_get_track_index(),x=z+1,w=null,y=false;
if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");d.el.removeClass("playing");y=true;}if(x>d.settings.tracklist_length){x=0;}w=a("#sp-queue-scroll tbody tr:eq("+x+")");
_destruct_sound();d.settings.track=w;if(y){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);}return false;};var e=function(){d.settings.storage_play=false;
if(d.settings.tracklist_length==null){return;}var z=_get_track_index(),y=z-1,w=null,x=false;if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");
d.el.removeClass("playing");x=true;}if(y<0){y=d.settings.tracklist_length;}w=a("#sp-queue-scroll tbody tr:eq("+y+")");_destruct_sound();d.settings.track=w;
if(x){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);}return false;};var k=function(){d.settings.storage_play=false;if(d.settings.tracklist_length==null){return;
}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");}if(d.settings.sound){d.settings.sound.stop();}return false;};var u=function(){a(".sp-track-container a",d.el).removeAttr("href").removeAttr("target");
a(".sp-track-container .sp-track-title, .sp-track-container .sp-track-artist",d.el).text("");a(".sp-track-container .sp-track-artwork",d.el).attr("src",d.settings.no_track_image);
a(".sp-marquee",d.el).text("");if(d.settings.sound){var C=d.settings.track.find(".sp-cover-artwork img").attr("src"),D=d.settings.track.find(".sp-title-button").text(),y=d.settings.track.find(".sp-artist-button").text(),A=d.settings.track.find(".sp-artist-button").attr("href"),x=d.settings.track.find(".sp-artist-button").attr("target"),w=d.settings.track.find(".sp-title-button").attr("href"),B=d.settings.track.find(".sp-title-button").attr("target");
shop_url=d.settings.track.find(".sp-tl-shop").attr("href"),shop_target=d.settings.track.find(".sp-tl-shop").attr("target");if(y!==""&&A!==""){a(".sp-track-container .sp-track-artist",d.el).attr("href",A);
if(x!==""){x=x;}else{x="_self";}a(".sp-track-container .sp-track-artist",d.el).attr("target",x);}if(w!==""){a(".sp-track-container .sp-track-title",d.el).attr("href",w);
if(B!==""){B=B;}else{B="_self";}a(".sp-track-container .sp-track-title",d.el).attr("target",B);}a(".sp-track-container .sp-track-artwork",d.el).attr("src",C);
a(".sp-track-container .sp-track-title",d.el).text(D);a(".sp-track-container .sp-track-artist",d.el).text(y);var z="<strong>"+D+"</strong>";if(y!==""){z=z+" - "+y;
}a(".sp-marquee",d.el).html(z);}return false;};_destruct_sound=function(){if(d.settings.sound){d.settings.sound.stop();d.settings.sound.setPosition(0);
d.settings.sound.destruct();d.settings.sound=null;u();}};var t=function(){d.settings.obj.track_nr++;if(d.settings.obj.track_nr==0){setTimeout(function(){d.el.addClass("sp-queue-loading");
},500);a(".sp-queue").css("opacity",0);}if(d.settings.obj.track_nr>=d.settings.obj.tracks_size){h();}else{setTimeout(r,d.settings.delay);}};var h=function(){var y=null,x=null,z=null;
if(a("#sp-scroller tr").length>0&&d.settings.rebuild){setTimeout(function(){d.el.removeClass("sp-queue-loading");},500);a(".sp-queue").css("opacity",1);
d.settings.rebuild=false;if(d.settings.new_tracks_notifications){a(".sp-badge",d.el).text("+"+d.settings.new_tracks_nr);if(a(".sp-badge",d.el).text()!="+0"){a(".sp-badge",d.el).addClass("sp-show-badge");
setTimeout(function(){a(".sp-badge",d.el).removeClass("sp-show-badge");},5000);}}d.settings.new_tracks_nr=0;}else{setTimeout(function(){d.el.removeClass("sp-queue-loading");
},500);a(".sp-queue").css("opacity",1);}if(d.settings.track!=null&&d.settings.autoplay){if(d.settings.random){s();}else{_play();}d.settings.autoplay=false;
}else{if(d.settings.track!=null&&d.settings.load_first_track){if(d.settings.random){s();}else{_play();}}}if(d.settings.obj.action=="play_track"||d.settings.obj.action=="play_tracks"){if(d.settings.obj.init_track!=undefined){var w=d.settings.obj.init_track;
y=d.settings.obj.tracks[w].data("status");z=d.settings.obj.tracks[w].attr("href");if(y=="track_ready"||y=="already_onlist"){d.settings.obj.tracks[0]=d.settings.obj.tracks[w];
}}for(var A=0;A<d.settings.obj.tracks_size;A++){y=d.settings.obj.tracks[A].data("status");z=d.settings.obj.tracks[A].attr("href");if(y=="track_ready"||y=="already_onlist"){x=d.settings.track.find(".sp-track-control").attr("href");
if(x!=z){_destruct_sound();var B=a("#sp-queue-scroll").find('.sp-track-control[href="'+z+'"]');d.settings.track=B.parents('tr[class*="sp-track"]');_play();
}else{_play();}break;}}}d.settings.obj.status="ready";};var r=function(){var y=d.settings.obj.track_nr,x=d.settings.obj.tracks[y].attr("href"),w=/http(s?):\/\/soundcloud/;
if(w.test(x)){if(a('.sp-queue .sp-track[data-sc="'+x+'"]').length>0){d.settings.obj.tracks[y].attr("data-status","already_onlist");var z=a('#sp-queue-scroll tbody .sp-track[data-sc="'+x+'"]');
z=z.find(".sp-track-control").attr("href");d.settings.obj.tracks[y].attr("href",z);t();}else{_add_soundcloud();}}else{if(a('.sp-queue .sp-track-control[href="'+x+'"]').length>0){d.settings.obj.tracks[y].attr("data-status","already_onlist");
t();}else{if(x!=""||x!="#"||x!=undefined){d.settings.obj.tracks[y].attr("data-status","file_exists");_create_track();}else{d.settings.obj.tracks[y].attr("data-status","Error404");
d.settings.play_from_list=false;t();}}}};_add_soundcloud=function(){var y=d.settings.obj.track_nr,w=d.settings.obj.tracks[y].attr("href");if(d.settings.client_id==""){d.settings.obj.tracks[y].attr("data-status","Error404");
t();return false;}else{if(!d.settings.soundcloud){d.settings.obj.tracks[y].attr("data-status","Error404");t();return false;}}if(d.settings.obj.tracks[y].data("sc_stream")!=undefined){var x={stream_url:null,artwork_url:null,title:null,permalink_url:null,user:{username:null,permalink_url:null}};
x.stream_url=d.settings.obj.tracks[y].data("sc_stream");x.artwork_url=d.settings.obj.tracks[y].data("sc_art");x.title=d.settings.obj.tracks[y].data("sc_title");
x.user.username=d.settings.obj.tracks[y].data("artist");x.user.permalink=d.settings.obj.tracks[y].data("artist_url");x.permalink=d.settings.obj.tracks[y].data("release_url");
_create_soundcloud(x);return false;}SC.get("/resolve",{url:w},function(z){if(z==undefined||z.errors){d.settings.obj.tracks[y].attr("data-status","Error404");
t();}else{if(z.length!=undefined){z.tracks=z;}else{if(z.kind!=undefined&&z.kind=="user"){SC.get("/users/"+z.id+"/tracks",function(A){A.tracks=A;_process_sc_tracks(A);
});}else{if(z.kind!=undefined&&z.kind=="group"){SC.get("/groups/"+z.id+"/tracks",function(A){A.tracks=A;_process_sc_tracks(A);});}else{if(z.tracks){_process_sc_tracks(z);
}else{_create_soundcloud(z);}}}}}});};_process_sc_tracks=function(z){var C=d.settings.obj.track_nr,w=d.settings.obj.tracks[C].attr("href"),x=C,D=[],y=d.settings.obj.tracks[C].attr("data-artist"),F=d.settings.obj.tracks[C].attr("data-artist_url"),E=d.settings.obj.tracks[C].attr("data-artist_target"),B=d.settings.obj.tracks[C].attr("data-release_url"),A=d.settings.obj.tracks[C].attr("data-release_target");
shop_url=d.settings.obj.tracks[C].attr("data-shop_url"),shop_target=d.settings.obj.tracks[C].attr("data-shop_target"),free_download=d.settings.obj.tracks[C].attr("data-free_download");
d.settings.obj.tracks.splice(C,1);d.settings.obj.tracks_size=d.settings.obj.tracks_size-1;d.settings.obj.track_nr=d.settings.obj.track_nr-1;if(shop_url==undefined||shop_url==""){shop_url="";
}if(shop_target==undefined||shop_target==""){shop_target="";}if(free_download==undefined||free_download==""){free_download="";}a.each(z.tracks,function(L,I){var N,M,H,K,J;
if(y==undefined||y==""){N=I.user.username;}else{N=y;}if(F==undefined||F==""){M=I.user.permalink_url;H="_blank";}else{M=F;if(E==undefined||E==""){H="_blank";
}else{H=E;}}if(B==undefined||B==""){K=I.permalink_url;J="_blank";}else{K=B;if(A==undefined||A==""){J="_blank";}else{J=A;}}var G='<a href="'+I.permalink_url+'" data-cover="" data-sc_list="'+w+'" data-sc_stream="'+I.stream_url+'" data-sc_art="'+I.artwork_url+'" data-sc_title="'+I.title+'" data-artist="'+N+'" data-artist_url="'+M+'" data-artist_target="'+H+'" data-release_url="'+K+'" data-release_target="'+J+'" data-shop_url="'+shop_url+'" data-shop_target="'+shop_target+'" data-free_download="'+free_download+'">'+I.title+"</a>";
D.push(a(G));});_insert_array_at(d.settings.obj.tracks,x,D);d.settings.obj.tracks_size=d.settings.obj.tracks_size+D.length;t();};_insert_array_at=function(y,x,w){Array.prototype.splice.apply(y,[x,0].concat(w));
return y;};_create_soundcloud=function(y){var A=d.settings.obj.track_nr,w=d.settings.obj.tracks[A].attr("href"),E=y.stream_url,x=d.settings.obj.tracks[A].attr("data-artist"),D=d.settings.obj.tracks[A].attr("data-artist_url"),C=d.settings.obj.tracks[A].attr("data-artist_target"),B=d.settings.obj.tracks[A].attr("data-release_url"),z=d.settings.obj.tracks[A].attr("data-release_target");
if(E===undefined){console.log("Soundcloud error: No stream URL!");d.settings.obj.tracks[A].attr("data-status","Error404");t();return false;}(E.indexOf("secret_token")==-1)?E=E+"?":E=E+"&";
E=E+"consumer_key="+d.settings.client_id;if(x==undefined||x==""){x=y.user.username;}if(D==undefined||D==""){D=y.user.permalink_url;}if(C==undefined||C==""){C="_blank";
}if(B==undefined||B==""){B=y.permalink_url;}if(z==undefined||z==""){z="_blank";}if(d.settings.replace_sc_covers==true){if(d.settings.obj.tracks[A].attr("data-cover")==undefined||d.settings.obj.tracks[A].attr("data-cover")==""){d.settings.obj.tracks[A].attr("data-cover",y.artwork_url);
}}else{d.settings.obj.tracks[A].attr("data-cover",y.artwork_url);}d.settings.obj.tracks[A].attr("data-sc",w);d.settings.obj.tracks[A].attr("href",E);d.settings.obj.tracks[A].attr("data-artist",x);
d.settings.obj.tracks[A].attr("data-artist_url",D);d.settings.obj.tracks[A].attr("data-artist_target",C);d.settings.obj.tracks[A].attr("data-release_url",B);
d.settings.obj.tracks[A].attr("data-release_target",z);d.settings.obj.tracks[A].text(y.title);_create_track();};_create_track=function(){d.settings.rebuild=true;
var H=d.settings.obj.track_nr,w=d.settings.obj.tracks[H].attr("href"),G=d.settings.obj.tracks[H].text(),M=d.settings.obj.tracks[H].data("cover"),B=d.settings.obj.tracks[H].data("artist"),K=d.settings.obj.tracks[H].data("artist_url"),J=d.settings.obj.tracks[H].data("artist_target"),I=d.settings.obj.tracks[H].data("release_url"),F=d.settings.obj.tracks[H].data("release_target"),A=d.settings.obj.tracks[H].data("shop_url"),E=d.settings.obj.tracks[H].data("shop_target"),z=d.settings.obj.tracks[H].data("free_download"),D=a(d.settings.track_html),y=null;
if(a('.sp-queue .sp-track-control[href="'+w+'"]',d.el).length){d.settings.obj.tracks[H].attr("data-status","already_onlist");t();return false;}D.find(".sp-track-control").attr("href",w);
if(M==undefined||M==""){M=d.settings.no_track_image;}D.find(".sp-cover-artwork img").attr("src",M);D.find(".sp-title-button").text(G);if(I!=undefined||I!=""){D.find(".sp-title-button").attr("href",I);
if(F!=undefined||F!=""){D.find(".sp-title-button").attr("target",F);}}if(B!=undefined&&B!=""){D.find(".sp-artist-button").text(B);if(K!=undefined||K!=""){D.find(".sp-artist-button").attr("href",K);
if(J!=undefined&&J!=""){D.find(".sp-artist-button").attr("target",J);}}}if(A!=undefined&&A!=""){D.find(".sp-cart-button").attr("href",A);if(E!=undefined&&E!=""){D.find(".sp-cart-button").attr("target",E);
}if(z!=undefined&&z=="yes"){D.find(".sp-cart-button").addClass("sp-download-button");D.find(".sp-cart-button").attr("target",E);D.find(".sp-cart-button").attr("download",A);
}}else{D.find(".sp-cart-button").remove();}if(d.settings.obj.list_id!=undefined){var C=d.settings.obj.list_id;D.attr("data-fromlist",C).addClass("fromlist");
}if(d.settings.obj.tracks[H].data("sc")!=undefined){var x=d.settings.obj.tracks[H].data("sc");D.attr("data-sc",x).addClass("sc-track");}if(d.settings.obj.tracks[H].data("sc_list")!=undefined){var L=d.settings.obj.tracks[H].data("sc_list");
D.attr("data-sc_list",L).addClass("sc-list");}d.settings.tracklist.append(D);y=d.settings.tracklist.find(D);d.settings.track_id++;d.settings.new_tracks_nr++;
d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;if(d.settings.tracklist_length==0){d.settings.track=y;}d.settings.obj.tracks[H].attr("data-status","track_ready");
y.find(".sp-track-control").on("click",j);y.find(".sp-remove-button").on("click",o);t();};var j=function(w){w.preventDefault();d.settings.play_from_list=false;
var x=a(this).parents('tr[class*="sp-track"]');if(x.hasClass("playing")||x.hasClass("paused")){_play();return false;}_destruct_sound();d.settings.track=x;
_play();return false;};var o=function(w){w.preventDefault();var y=a(this).parents('tr[class*="sp-track"]'),C=a(this).parents('tr[class*="sp-track"]').index(),A=null,D=false;
if(y.hasClass("playing")){D=true;}if(d.settings.sound){A=d.settings.sound.url;}if(d.settings.tracklist_length==0){_destruct_sound();d.settings.track=null;
d.settings.tracklist_length=null;p(0);if(typeof(Storage)!=="undefined"){var B=a("#sp-queue-scroll tbody").html();sessionStorage.setItem("scamp_player_list",B);
if(d.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}return;}if(A==y.find(".sp-track-control ").attr("href")){var x=C,E=x+1,z=null;
if(E>d.settings.tracklist_length){E=0;}z=a("#sp-queue-scroll tbody tr:eq("+E+")");if(D){_destruct_sound();d.settings.track=z;_play();}else{_destruct_sound();
}}p(C);d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;if(typeof(Storage)!=="undefined"){var B=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",B);if(d.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}};var p=function(w){if(a("#sp-scroller tr").length>0){d.settings.tracklist.find("tbody tr:eq("+w+")").remove();
}return false;};var l=function(){var w="ontouchstart" in window||navigator.maxTouchPoints,z=w?"touchstart":"mousedown",A=w?"touchmove":"mousemove",x=w?"touchend":"mouseup",y=w?"touchcancel":"mouseup";
a(".sp-volume-slider").on(z,function(H){if(d.settings.tracklist_length==null){return;}var E=a(this),B=E.find(".sp-volume-position"),G=E.offset().left,D=E.width(),F=d.settings.sound,C=null;
a(document).on("touchmove mousemove",function(K){var J=w?K.originalEvent.changedTouches[0]:K;var I=Math.max(0,Math.min(J.clientX-G,D));C=Math.floor(I/D*100);
B.width(I);if(F){F.setVolume(C);}_set_vol_class(C);return false;}).on("touchend mouseup",function(I){d.settings.volume=C;a(this).unbind("touchmove mousemove");
a(this).unbind("touchend mouseup");return false;}).trigger({type:"touchmove mousemove",clientX:H.clientX});return false;});a(".sp-progress").bind(z,function(G){if(d.settings.tracklist_length==null){return;
}var C=a(this).addClass("searching"),B=C.find(".sp-postion"),F=C.offset().left,D=C.width(),E=d.settings.sound;d.settings.searching=true;if(w==false){if(E){xPos=Math.max(0,Math.min(G.pageX-F,D));
B.width(xPos);E.setPosition(xPos/D*E.durationEstimate);}}E.pause();a(document).bind("touchmove mousemove",function(J){var I=w?J.originalEvent.changedTouches[0]:J;
var H=Math.max(0,Math.min(I.clientX-F,D));B.width(H);if(E){E.setPosition(H/D*E.durationEstimate);}return false;}).bind("touchend mouseup",function(H){d.settings.searching=false;
C.removeClass("searching");if(d.el.hasClass("playing")&&E){E.resume();}a(this).unbind("touchmove mousemove");a(this).unbind("touchend mouseup");return false;
}).trigger({type:"touchmove mousemove",clientX:G.clientX});return false;});};_set_vol_class=function(w){if(w==0){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-max").addClass("sp-vol-off");
}else{if(w<=50){a(".sp-volume-button").removeClass("sp-vol-max sp-vol-off").addClass("sp-vol-medium");}else{if(w>75){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-off").addClass("sp-vol-max");
}}}};_format_time=function(x){var z=Math.floor(x/1000),w=Math.floor(z/60),y=z-w*60;return w+":"+(y<10?"0"+y:y);};_pretty_link=function(C){var H="",E="",w=C.attr("href"),I=C.data("cover"),z=C.data("artist"),G=C.data("artist_url"),F=C.data("artist_target"),D=C.data("release_url"),B=C.data("release_target"),y=C.data("shop_url"),A=C.data("shop_target"),x=C.data("free_download");
if(d.settings.link_filter!=undefined&&d.settings.link_filter!=""){if(a(C).find(d.settings.link_filter).length){E=a(C).find(d.settings.link_filter).text();
}}if(I==undefined||I==""){I="";}else{I='data-cover="'+I+'"';}if(z==undefined||z==""){z="";}else{z='data-artist="'+z+'"';}if(G==undefined||G==""){G="";}else{G='data-artist_url="'+G+'"';
}if(F==undefined||F==""){F="";}else{F='data-artist_target="'+F+'"';}if(D==undefined||D==""){D="";}else{D='data-release_url="'+D+'"';}if(B==undefined||B==""){B="";
}else{B='data-release_target="'+B+'"';}if(y==undefined||y==""){y="";}else{y='data-shop_url="'+y+'"';}if(A==undefined||A==""){A="";}else{A='data-shop_target="'+A+'"';
}if(x==undefined||x==""){x="no";}else{x='data-free_download="'+x+'"';}H='<a href="'+w+'" '+I+" "+z+" "+G+" "+F+" "+D+" "+B+" "+y+" "+A+" "+x+">"+E+"</a>";
H=a(H);return H;};_add_track=function(y){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;
}var w=_pretty_link(a(this)),x=[w];d.settings.obj={status:"working",action:"add_track",tracks:x,tracks_size:1,track_nr:-1};t();y.preventDefault();y.stopPropagation();
y.stopImmediatePropagation();return false;};_play_track=function(z){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;
}if(a(this).parents(".sp-list")){var B=a(this).parents(".sp-list");if(B.attr("id")){if(!_check_tracks(B.attr("id"))){var y=a(this).parents("li").index();
_remove_tracks(B.attr("id"));_create_tracks(B.attr("id"),"play_tracks",y);return false;}d.settings.play_from_list=true;}}var w=_pretty_link(a(this)),x=[w];
if(d.settings.mobile){var A="add_track";}else{var A="play_track";}d.settings.obj={status:"working",action:"play_track",tracks:x,tracks_size:1,track_nr:-1};
t();z.preventDefault();z.stopPropagation();z.stopImmediatePropagation();return false;};_add_tracks=function(w){var x=a(this).data("id");if(x==undefined||x==""||a("#"+x).length<=0){return false;
}if(d.settings.obj.status=="working"){return false;}if(!_check_tracks(x)){_remove_tracks(x);}_create_tracks(x,"add_tracks",0);w.preventDefault();w.stopPropagation();
w.stopImmediatePropagation();return false;};_play_tracks=function(w){var x=a(this).data("id");if(x==undefined||x==""||a("#"+x).length<=0){return false;
}if(d.settings.obj.status=="working"){return false;}if(!_check_tracks(x)){_remove_tracks(x);}_create_tracks(x,"play_tracks");w.preventDefault();w.stopPropagation();
w.stopImmediatePropagation();return false;};_create_tracks=function(C,A,x){var z=a("#"+C),w=new Array(),y=a("a.sp-add-track, a.sp-play-track",z).length;
a("a.sp-add-track, a.sp-play-track",z).each(function(D){w.push(_pretty_link(a(this)));});if(d.settings.mobile&&A=="play_tracks"){var B="add_tracks";}else{var B="play_tracks";
}d.settings.obj={status:"working",action:A,list_id:C,init_track:x,tracks:w,tracks_size:y,track_nr:-1};t();};_debug=function(w){if(d.settings.debug){a("#scamp-console").append(w+"<br>");
}};var n=function(A){var w="ontouchstart" in window||navigator.maxTouchPoints,z=w?"touchstart":"mousedown",B=w?"touchmove":"mousemove",x=w?"touchend":"mouseup",y=w?"touchcancel":"mouseup";
a(A).bind("touchstart mousedown",function(H){if(d.settings.tracklist_length==null){return;}var D=a(this).addClass("searching"),C=D.find(".sp-content-postion"),G=D.offset().left,E=D.width(),F=d.settings.sound;
d.settings.searching=true;F.pause();if(w==false){if(F){xPos=Math.max(0,Math.min(H.pageX-G,E));C.width(xPos);F.setPosition(xPos/E*F.durationEstimate);}}a(document).bind("touchmove mousemove",function(K){var J=w?K.originalEvent.changedTouches[0]:K;
var I=Math.max(0,Math.min(J.clientX-G,E));C.width(I);if(F){F.setPosition(I/E*F.durationEstimate);}return false;}).bind("touchend mouseup",function(I){d.settings.searching=false;
D.removeClass("searching");if(d.el.hasClass("playing")&&F){F.resume();}a(this).unbind("touchmove mousemove");a(this).unbind("touchend mouseup");return false;
}).trigger({type:"touchmove mousemove",clientX:H.clientX});return false;});};d.update_events=function(w){a(w).off("click",".sp-add-track",_add_track);a(w).off("click",".sp-play-track",_play_track);
a(w).off("click",".sp-add-list",_add_tracks);a(w).off("click",".sp-play-list",_play_tracks);n(a(".sp-content-control"));a(w).on("click",".sp-add-track",_add_track);
a(w).on("click",".sp-play-track",_play_track);a(w).on("click",".sp-add-list",_add_tracks);a(w).on("click",".sp-play-list",_play_tracks);};d.update_content=function(){var y=d.settings.track,w=null,x=null;
if(y==null){return;}a("a.sp-play-track").removeClass("sp-play sp-pause sp-stop sp-loading");a(".sp-content-control.sp-is-active").removeClass("sp-is-active");
if(y.hasClass("sc-list")){w=y.data("sc_list");}else{if(y.hasClass("sc-track")){w=y.data("sc");}else{w=y.find(".sp-track-control").attr("href");}}a('a.sp-play-track[href="'+w+'"]').each(function(){var B=a(this);
if(B.length>0){if(typeof B.data("control")!=="undefined"&&d.settings.status!=null){var D=B.data("control");D=a("#"+D);if(D.length){D.addClass("sp-is-active");
var z=a("#scamp_player .sp-position").width(),A=a("#scamp_player .sp-position").offsetParent().width(),C=100*z/A;D.find(".sp-content-position").css("width",C+"%");
}}switch(d.settings.status){case"loading":B.addClass("sp-loading");break;case"play":B.addClass("sp-play");break;case"pause":B.addClass("sp-pause");break;
case"stop":B.addClass("sp-stop");a(".sp-content-control.sp-is-active").removeClass("sp-is-active");break;}}});};d.addTrack=function(w,y){if(d.settings.obj.status=="working"){return false;
}if(typeof w=="undefined"){return false;}var w=a('<a href="'+w.url+'" data-cover="'+w.cover+'" data-artist="'+w.artist+'" data-artist_url="'+w.artist_url+'" data-artist_target="'+w.artist_target+'" data-release_url="'+w.release_url+'" data-release_target="'+w.release_target+'" data-shop_url="'+w.shop_url+'" data-shop_target="'+w.shop_target+'" data-free_download="'+x[i].free_download+'">'+w.title+"</a>"),x=[w];
d.settings.obj={status:"working",action:y,tracks:x,tracks_size:1,track_nr:-1};t();return false;};d.addTracks=function(z,C){if(d.settings.obj.status=="working"){return false;
}if(typeof z=="undefined"||z.length==0){return false;}var w=new Array(),B=z.length;for(var A=0,y=B;A<y;A++){var x=a('<a href="'+z[A].url+'" data-cover="'+z[A].cover+'" data-artist="'+z[A].artist+'" data-artist_url="'+z[A].artist_url+'" data-artist_target="'+z[A].artist_target+'" data-release_url="'+z[A].release_url+'" data-release_target="'+z[A].release_target+'" data-shop_url="'+z[A].shop_url+'" data-shop_target="'+z[A].shop_target+'"  data-free_download="'+z[A].free_download+'">'+z[A].title+"</a>");
w.push(x);}d.settings.obj={status:"working",action:C,tracks:w,tracks_size:B,track_nr:-1};t();};d.playerAction=function(w){if(d.settings.obj.status=="working"){return false;
}if(w=="play"){_play();}else{if(w=="pause"){_pause();}else{if(w=="stop"){k();}else{if(w=="next"){f();}else{if(w=="prev"){e();}}}}}};q();};})(jQuery);